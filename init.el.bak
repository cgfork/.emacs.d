;; -*- lexical-binding: t -*-XS
;;; package --- summary
;;; Commentary:
;;;
;;; Code:
;; Check the Emacs version
(when (version< emacs-version "25.1")
  (error "This requires Emacs 25.1 and above!"))

;; Setup the group
(defgroup cgfork nil
  "cgfork group for emacs customizations."
  :group 'convenience)

;; Setup `package`
;; Define the customize variable
(defcustom cgfork-package-archives 'melpa
  "Set package archives from which to fetch."
  :type '(choice
          (const :tag "Melpa" melpa)
          (const :tag "Melpa Mirror" melpa-mirror)
          (const :tag "Emacs-China" emacs-china)
          (const :tag "Netease" netease)
          (const :tag "Tuna" tuna))
  :group 'cgfork)

;; Setup startup message
(setq inhibit-startup-message t)

;; Setup load-path
(add-to-list 'load-path (expand-file-name "setup" user-emacs-directory))

;; Define the set function
(defun set-package-archives (archives)
  "Set specific package ARCHIVES repository."
  (interactive
   (list (intern (completing-read "Choose package archives: "
                                  '(melpa melpa-mirror emacs-china netease tuna)))))

  (setq package-archives
        (let* ((no-ssl (and (memq system-type '(windows-nt ms-dos))
                            (not (gnutls-available-p))))
               (proto (if no-ssl "http" "https")))
          (pcase archives
            ('melpa
             `(,(cons "gnu"   (concat proto "://elpa.gnu.org/packages/"))
               ,(cons "melpa" (concat proto "://melpa.org/packages/"))))
            ('melpa-mirror
             `(,(cons "gnu"   (concat proto "://elpa.gnu.org/packages/"))
               ,(cons "melpa" (concat proto "://www.mirrorservice.org/sites/melpa.org/packages/"))))
            ('emacs-china
             `(,(cons "gnu"   (concat proto "://elpa.emacs-china.org/gnu/"))
               ,(cons "melpa" (concat proto "://elpa.emacs-china.org/melpa/"))))
            ('netease
             `(,(cons "gnu"   (concat proto "://mirrors.163.com/elpa/gnu/"))
               ,(cons "melpa" (concat proto "://mirrors.163.com/elpa/melpa/"))))
            ('tuna
             `(,(cons "gnu"   (concat proto "://mirrors.tuna.tsinghua.edu.cn/elpa/gnu/"))
               ,(cons "melpa" (concat proto "://mirrors.tuna.tsinghua.edu.cn/elpa/melpa/"))))
            (archives
             (error "Unknown archives: '%s'" archives)))))

  (message "Set package archives to '%s'." archives))



;; Setup `use-package`
(set-package-archives cgfork-package-archives)
(require 'package)
(setq package-enable-at-startup nil)
(package-initialize)

;; Bootstrap `use-package`
(unless (package-installed-p 'use-package)
  (package-refresh-contents)
  (package-install 'use-package))

;; Set default font
;; (set-frame-font "-*-Source Code Pro for Powerline-normal-normal-normal-*-15-*-*-*-m-0-iso10646-1")
;; (set-frame-font "-*-Monaco-normal-normal-normal-*-16-*-*-*-m-0-iso10646-1")
;; (set-frame-font "-*-Inconsolata for Powerline-normal-normal-normal-*-16-*-*-*-m-0-iso10646-1")
(set-frame-font "-*-Ubuntu Mono derivative Powerline-normal-normal-normal-*-16-*-*-*-m-0-iso10646-1")

;; Load setup
(require 'setup-init)
(require 'setup-buffer)
(require 'setup-dired)
(require 'setup-company)
(require 'setup-projectile)
(require 'setup-go)
(require 'setup-markdown)
(require 'setup-org)
(require 'setup-treemacs)
(require 'setup-git)
(require 'setup-clisp)
(require 'protobuf-mode)

(add-hook 'protobuf-mode-hook
	  (lambda () (c-add-style "my-style" '((c-basic-offset . 2) (indent-tabs-mode . nil)) t)))

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(cgfork-package-archives (quote netease))
 '(current-language-environment "UTF-8")
 '(custom-enabled-themes (quote (solarized-light)))
 '(custom-safe-themes
   (quote
    ("0598c6a29e13e7112cfbc2f523e31927ab7dce56ebb2016b567e1eff6dc1fd4f" "fa2b58bb98b62c3b8cf3b6f02f058ef7827a8e497125de0254f56e373abee088" "bffa9739ce0752a37d9b1eee78fc00ba159748f50dc328af4be661484848e476" "d91ef4e714f05fff2070da7ca452980999f5361209e679ee988e3c432df24347" "a8245b7cc985a0610d71f9852e9f2767ad1b852c2bdea6f4aadc12cce9c4d6d0" "2a7beed4f24b15f77160118320123d699282cbf196e0089f113245d4b729ba5d" "274fa62b00d732d093fc3f120aca1b31a6bb484492f31081c1814a858e25c72e" "04232a0bfc50eac64c12471607090ecac9d7fd2d79e388f8543d1c5439ed81f5" "d057f0430ba54f813a5d60c1d18f28cf97d271fd35a36be478e20924ea9451bd" default)))
 '(electric-pair-mode t)
 '(flycheck-emacs-lisp-load-path (quote ("setup")))
 '(global-display-line-numbers-mode t)
 '(ns-pop-up-frames nil)
 '(org-adapt-indentation nil)
 '(package-selected-packages
   (quote
    (ac-html doom-modeline spacemacs-theme solarized-theme lsp-ui lsp-mode ample-zen-theme dracula-theme dired-sidebar cider paredit go-rename go-dlv golint highlight-parentheses slime smex neotree command-log-mode zenburn-theme treemacs-magit treemacs-icons-dired treemacs-projectile treemacs-evil treemacs go-guru go-eldoc company-go multiple-cursors ob-go org-preview-html go-mode counsel-projectile projectile diredfl all-the-icons-dired pcre2el dired+ yasnippet-snippets company counsel ace-window exec-path-from-shell try use-package)))
 '(plantuml-default-exec-mode (quote jar))
 '(plantuml-jar-path (expand-file-name "~/.bin/plantuml.jar"))
 '(show-paren-mode t)
 '(tab-stop-list
   (quote
    (4 8 12 16 20 24 28 32 36 40 44 48 52 56 60 64 68 72 76 80 84 88 92 96 100 104 108 112 116 120)))
 '(tool-bar-mode nil)
 '(winner-mode t))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(aw-leading-char-face ((t (:inherit ace-jump-face-foreground :height 3.0)))))


(provide 'init)
;;; init.el ends here
